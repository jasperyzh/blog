---
// global_style
import "../styles/global.scss";

import { SITE_TITLE, SITE_DESCRIPTION, SITE_YEAR } from "../consts";

import Head from "./Head.astro";
import Link from "./Link.astro";
import EffectGrain from "./_EffectGrain.astro";

export interface Props {
  title?: string;
  description?: string;
  image?: string;
}

const {
  title = SITE_TITLE,
  description = SITE_DESCRIPTION,
  image,
} = Astro.props as Props;

const body_page_class = [{ frontpage: Astro.url.pathname == "/" }];
---

<!DOCTYPE html>
<html lang="en">
  <Head {title} {description} {image} />

  <body class:list={["sticky-footer", body_page_class]}>
    <header id="site-header">
      <span id="site-title">
        {SITE_TITLE}
      </span>
      <nav>
        <Link href="/">Home</Link>
        <Link href="/blog">Blog</Link>
        <Link href="/work">Works</Link>
      </nav>
    </header>

    <hr />

    <main>
      <slot />
    </main>

    <hr />

    <footer id="site-footer">
      <!-- codewithintent; instillmindfulness; learnandcreate -->
      <p class="small">
        &copy; {SITE_TITLE}
        {SITE_YEAR} &middot; <Link class="muted" href="/rss.xml">rss</Link>
      </p>
      <EffectGrain />
    </footer>

    <style>
      body.sticky-footer {
        min-height: 100vh;
        margin: 0 auto;
        display: flex;
        flex-direction: column;

        & > main {
          flex-grow: 1;
        }
        & > footer {
          margin-top: auto;
        }
      }
      #site-title {
        font-size: var(--size);
        font-weight: bold;
      }
      header > nav > a {
        margin-right: var(--size);
      }
      main {
        padding: var(--size) 0;
      }
    </style>
  </body>
</html>
